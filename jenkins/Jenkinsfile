pipeline {
  agent {
    kubernetes {
      label 'mypod'
      yamlFile 'jenkins/Pod.yaml'
    }
  }
  stages {
    stage('Clone repository') {
      checkout scm
    }
    stage('Build Yii2 App') {
      steps {
        container('docker') {
          docker.build("jacksontong/yii2-basic-app")
        }
      }
    }
  }
}